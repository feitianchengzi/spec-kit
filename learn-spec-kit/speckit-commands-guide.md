# SpecKit 命令详解

## 概述

本文档从使用角度详细介绍 SpecKit 的各个命令，包括设计目的、使用场景、具体作用和最佳实践。这些命令是规范驱动开发流程的核心工具。

## 核心命令概览

SpecKit 提供了一套完整的命令体系，支持从项目初始化到代码实现的完整开发流程：

| 命令 | 设计目的 | 使用场景 | 核心作用 |
|------|----------|----------|----------|
| `init` | 项目初始化 | 创建新项目 | 建立规范驱动开发环境 |
| `plan` | 制定开发计划 | 项目规划阶段 | 结构化项目目标和里程碑 |
| `specify` | 详细规范制定 | 需求分析阶段 | 生成完整的产品需求文档 |
| `clarify` | 需求澄清 | 需求不明确时 | 澄清模糊需求和技术细节 |
| `tasks` | 任务分解 | 开发准备阶段 | 将规范分解为具体任务 |
| `implement` | 代码实现 | 开发实施阶段 | 基于规范生成代码 |
| `analyze` | 代码分析 | 代码审查阶段 | 分析代码质量和规范符合性 |
| `constitution` | 项目宪法 | 项目治理 | 建立项目开发规范和原则 |

## 详细命令说明

### 1. `init` - 项目初始化

#### 设计目的
建立规范驱动开发的基础环境，创建标准化的项目结构和配置。

#### 使用场景
- 创建新的规范驱动开发项目
- 为现有项目添加 SpecKit 支持
- 建立团队标准化的开发环境

#### 具体作用
- 创建标准化的项目目录结构
- 配置选定的 AI 助手集成
- 生成项目模板和配置文件
- 建立规范文档的基础框架

#### 使用示例

```bash
# 基本用法
uvx --from git+https://github.com/github/spec-kit.git specify init my-project

# 指定 AI 助手
uvx --from git+https://github.com/github/spec-kit.git specify init my-project --ai claude

# 指定项目类型
uvx --from git+https://github.com/github/spec-kit.git specify init my-project --ai claude --type web-app
```

#### 最佳实践
- 在项目开始前就使用 `init` 建立规范环境
- 根据团队偏好选择合适的 AI 助手
- 为不同类型的项目选择相应的模板

### 2. `plan` - 制定开发计划

#### 设计目的
将模糊的项目想法转化为结构化的开发计划，明确项目目标、功能范围和技术路线。

#### 使用场景
- 项目启动阶段的需求梳理
- 复杂项目的架构规划
- 团队协作的项目目标对齐

#### 具体作用
- 生成项目目标声明
- 定义功能范围和技术选型
- 制定开发里程碑和时间安排
- 识别潜在风险和依赖关系

#### 使用示例

```bash
# 在项目目录中
cursor-agent plan "开发一个电商平台，包含用户管理、商品管理、订单处理功能"

# 更详细的规划
cursor-agent plan "开发一个微服务架构的电商平台，使用 Python FastAPI 后端，React 前端，PostgreSQL 数据库，支持 Docker 部署"
```

#### 生成内容示例
- 项目概述和目标
- 核心功能模块
- 技术架构选型
- 开发阶段划分
- 风险评估和应对策略

#### 最佳实践
- 在项目初期就制定清晰的计划
- 与团队成员讨论和确认计划内容
- 定期回顾和更新计划

### 3. `specify` - 详细规范制定

#### 设计目的
将开发计划转化为详细的产品需求文档和技术规范，为后续开发提供明确的指导。

#### 使用场景
- 基于计划制定详细需求
- 为复杂功能编写技术规范
- 建立团队对需求的共同理解

#### 具体作用
- 生成结构化的产品需求文档 (PRD)
- 定义用户故事和验收标准
- 制定技术实现规范
- 建立接口和数据模型定义

#### 使用示例

```bash
# 基于计划制定详细规范
cursor-agent specify "详细描述电商平台的用户管理模块，包括注册、登录、权限管理功能"

# 技术规范制定
cursor-agent specify "制定用户认证系统的技术实现方案，包括 JWT 令牌、密码加密、会话管理"
```

#### 生成内容示例
- 功能需求详细描述
- 用户故事和用例
- 技术实现方案
- 接口定义和数据模型
- 验收标准和测试用例

#### 最佳实践
- 规范要尽可能详细和明确
- 包含具体的验收标准
- 考虑边界情况和异常处理
- 定期与利益相关者确认规范内容

### 4. `clarify` - 需求澄清

#### 设计目的
澄清模糊或不明确的需求，确保开发团队对需求有准确的理解。

#### 使用场景
- 需求描述不够清晰时
- 技术实现方案有歧义时
- 需要补充遗漏的需求细节时

#### 具体作用
- 识别需求中的模糊点
- 提出澄清问题
- 补充缺失的需求细节
- 确认技术实现方案

#### 使用示例

```bash
# 澄清用户权限需求
cursor-agent clarify "用户权限管理中的角色定义和权限分配规则"

# 澄清技术实现细节
cursor-agent clarify "数据库设计中的用户表结构和索引策略"
```

#### 最佳实践
- 主动识别需求中的模糊点
- 提出具体和有针对性的问题
- 记录澄清过程和结果
- 及时更新相关规范文档

### 5. `tasks` - 任务分解

#### 设计目的
将详细规范分解为具体的开发任务，为开发实施提供清晰的路线图。

#### 使用场景
- 开发准备阶段的任务规划
- 团队分工和任务分配
- 项目进度跟踪和管理

#### 具体作用
- 将规范分解为可执行的任务
- 定义任务优先级和依赖关系
- 估算任务工作量和时间
- 生成任务清单和检查项

#### 使用示例

```bash
# 基于规范生成任务
cursor-agent tasks "将用户认证系统的规范分解为具体的开发任务"

# 特定模块的任务分解
cursor-agent tasks "分解用户注册功能的开发任务，包括前端表单、后端 API、数据库设计"
```

#### 生成内容示例
- 任务清单和描述
- 任务优先级排序
- 依赖关系分析
- 工作量估算
- 验收标准定义

#### 最佳实践
- 任务要足够具体和可执行
- 合理设置任务优先级
- 考虑任务间的依赖关系
- 定期回顾和调整任务计划

### 6. `implement` - 代码实现

#### 设计目的
基于详细规范自动生成代码实现，确保代码与规范的一致性。

#### 使用场景
- 基于规范生成代码框架
- 实现具体的业务功能
- 生成测试用例和文档

#### 具体作用
- 根据规范生成代码结构
- 实现业务逻辑和算法
- 生成 API 接口和数据模型
- 创建测试用例和文档

#### 使用示例

```bash
# 实现用户认证功能
cursor-agent implement "基于用户认证规范实现注册、登录、权限验证功能"

# 实现特定模块
cursor-agent implement "实现用户注册 API，包括表单验证、密码加密、数据库存储"
```

#### 生成内容示例
- 代码文件和结构
- 业务逻辑实现
- API 接口定义
- 数据库模型和迁移
- 测试用例代码

#### 最佳实践
- 确保规范足够详细和准确
- 生成的代码要符合项目标准
- 及时测试和验证生成的代码
- 根据反馈调整和优化实现

### 7. `analyze` - 代码分析

#### 设计目的
分析代码质量、规范符合性和潜在问题，为代码改进提供建议。

#### 使用场景
- 代码审查和质量检查
- 规范符合性验证
- 性能和安全分析

#### 具体作用
- 分析代码结构和质量
- 检查规范符合性
- 识别潜在问题和风险
- 提供改进建议

#### 使用示例

```bash
# 分析代码质量
cursor-agent analyze "分析用户认证模块的代码质量，包括安全性、性能和可维护性"

# 检查规范符合性
cursor-agent analyze "检查实现代码是否符合用户认证规范的要求"
```

#### 分析维度
- 代码结构和组织
- 业务逻辑正确性
- 性能优化建议
- 安全性检查
- 可维护性评估

#### 最佳实践
- 定期进行代码分析
- 关注分析报告中的关键问题
- 根据建议持续改进代码
- 建立代码质量标准

### 8. `constitution` - 项目宪法

#### 设计目的
建立项目开发的核心原则和规范，指导整个开发过程。

#### 使用场景
- 项目启动时建立开发原则
- 团队规范制定和更新
- 项目治理和决策指导

#### 具体作用
- 定义项目开发原则
- 建立代码质量标准
- 制定团队协作规范
- 指导技术决策

#### 使用示例

```bash
# 建立项目宪法
cursor-agent constitution "为电商平台项目建立开发宪法，包括架构原则、代码规范、安全要求"

# 更新项目宪法
cursor-agent constitution "根据项目发展更新开发原则，增加微服务架构相关规范"
```

#### 宪法内容示例
- 架构设计原则
- 代码质量标准
- 安全开发规范
- 团队协作流程
- 技术选型标准

#### 最佳实践
- 在项目初期就建立宪法
- 定期回顾和更新宪法内容
- 确保团队理解和遵循宪法
- 将宪法作为决策的指导原则

## 命令组合使用

### 典型开发流程

```bash
# 1. 项目初始化
uvx --from git+https://github.com/github/spec-kit.git specify init my-project --ai claude

# 2. 进入项目目录
cd my-project

# 3. 制定开发计划
claude plan "开发一个用户管理系统"

# 4. 详细规范制定
claude specify "详细描述用户管理系统的功能需求"

# 5. 需求澄清
claude clarify "用户权限管理的具体实现方式"

# 6. 任务分解
claude tasks "将用户管理系统分解为开发任务"

# 7. 代码实现
claude implement "实现用户注册和登录功能"

# 8. 代码分析
claude analyze "分析用户认证代码的质量和安全性"
```

### 迭代开发流程

```bash
# 1. 更新规范
claude specify "添加用户密码重置功能"

# 2. 澄清新需求
claude clarify "密码重置的安全机制和用户体验"

# 3. 更新任务
claude tasks "为密码重置功能添加开发任务"

# 4. 实现新功能
claude implement "实现密码重置功能"

# 5. 分析更新
claude analyze "分析密码重置功能的安全性和用户体验"
```

## 最佳实践总结

### 1. 命令使用顺序
- 先 `plan` 后 `specify`
- 及时使用 `clarify` 澄清需求
- 在 `implement` 前完成 `tasks`
- 定期使用 `analyze` 检查质量

### 2. 规范质量
- 规范要详细和明确
- 包含具体的验收标准
- 考虑边界情况和异常处理
- 定期更新和维护规范

### 3. 团队协作
- 建立统一的开发流程
- 定期回顾和更新规范
- 确保团队对规范的理解一致
- 建立代码审查机制

### 4. 持续改进
- 根据实践经验调整流程
- 定期更新项目宪法
- 收集反馈并持续优化
- 建立知识管理体系

---

**下一步学习**:
- [SpecKit 命令原理](./speckit-commands-principles.md) - 了解命令背后的工作机制
- [实际项目开发流程指南](./practical-workflow-guide.md) - 实战应用
- [SpecKit 实践思考](./speckit-practice-thoughts.md) - 解决实际开发中的问题
