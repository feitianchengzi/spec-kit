---
description: 生成 origin/main 更新说明文档
---

根据提供的客户需求参数，执行以下操作：

1. fetch origin/main，获取必要信息，注意版本号以 pyproject.toml 为准
   - **当前版本号**，**当前CommitID**
   - **更新版本号**，**更新CommitID**

2. 检查版本号是否有更新，如果和本地版本号一致则停止

3. 定义 **更新内容唯一性标识**，格式为 `v[当前版本号]+[当前CommitID]-v[更新版本号]+[更新CommitID`

4. 使用 `git diff HEAD origin/main` 获取完整代码差异，保存到文件 `update-notes/[更新内容唯一性标识]-git-diff.txt`
   
5. 分析 `update-notes/[更新内容唯一性标识]-git-diff.txt` 的内容：
   - 先找出所有增删改的文件，分析文件的作用
   - 生成分析报告，为文档生成做准备

6. 基于分析结果，参考模板文件 `update-notes/update-notes-template.md` 生成更新说明文档：
   - 文档内容使用简体中文
   - 遵循内容生成最佳实践
   - 更新说明文档保存到 `update-notes/[更新内容唯一性标识]-update-notes.md` 文件中
   
   **内容生成最佳实践**：

   **通用原则**
   - 用词要准确，注意区分重构和扩展的差异
   - 功能点罗列不要用"等"，应该完整罗列
   - 对于关键概念，确保要有必要的、精炼的一句话详情做补充说明

   **更新概览设计**：
   - 概览中突出最重要的功能改进，避免重复内容
   - 如果有AI代理或命令系统的变更，则必须包含相关说明
  
   **主要内容优化**：
   - AI代理支持：
     - 代理要说明具体开发公司、技术特点和用途，不要简单的说"支持""
     - 新增代理和优化现有代理要分开说明，不能遗漏
   - 命令系统：
     - 命令说明虽然只占一行，但要包含重要的技术细节和使用场景，不要过于简洁
     - 新增命令和优化现有命令要分开说明，不能遗漏

   **总结部分精炼**：
   - 突出核心记忆点、关键改进、升级建议
   - 让用户在30秒内抓住所有重点

7. 检查更新说明文档的内容，和完整代码差异做比对
   - 补充遗漏项
   - 修复事实性错误

   **验证检查清单**：
   
   **数据一致性验证**
   - 文件数量统计：新增、删除、修改文件数量与 git diff 统计一致
   - 版本号验证：确认版本号变更准确（如 0.0.4 → 0.0.17）
   - 关键变更验证：重要功能变更与代码差异内容匹配
   
   **内容完整性检查**
   - 新增功能：所有新增文件都有对应的功能说明
   - 删除功能：所有删除文件都有对应的移除说明
   - 修改功能：重要修改都有对应的改进说明
   - 配置变更：依赖、环境、配置变更都有说明
   
   **技术准确性验证**
   - API变更：函数签名、参数、返回值变更准确描述
   - 依赖更新：新增、删除、升级的依赖包准确列出
   - 配置格式：配置文件的格式变更准确说明
   - 兼容性：破坏性变更和兼容性变更准确分类
   
   **用户体验检查**
   - 升级路径：提供清晰的升级步骤和建议
   - 影响评估：准确描述对现有用户的影响
   - 新功能亮点：突出用户最关心的新功能
   - 问题解决：提供常见问题的解决方案

8. 跟人类做确认，修复反馈问题
